<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../css/layui.css">
  <script src="../layui.js"></script>
  <script src="../js/jquery-3.5.1.js"></script>
  <title>Document</title>
</head>

<body>
  <div style="padding: 15px;">


    <blockquote class="layui-elem-quote" style="margin-top: 10px;">
      患者信息：
    </blockquote>
    <div class="layui-row" style="padding: 0 4em; line-height: 25px;">
      <div class="layui-col-xs4" style="margin: 0; padding: 3px  3em;">
        <span style="padding: 3px;padding-left: 13px; ">姓名：</span>
        <span style="padding: 3px; ">张珊</span>
      </div>
      <div class="layui-col-xs4" style="margin: 0; padding: 3px  3em;">
        <span style="padding: 3px; ">性别：</span>
        <span style="padding: 3px; ">女</span>
      </div>
      <div class="layui-col-xs4" style="margin: 0; padding: 3px  3em;">
        <span style="padding: 3px; ">手机号：</span>
        <span style="padding: 3px; ">13005681230</span>
      </div>
    </div>


    <div class="layui-row" style="padding: 0 4em;line-height: 25px;">
      <div class="layui-col-xs4" style=" margin: 0; padding: 3px  3em; padding-right: 0;">
        <span style="padding: 3px;padding-left: 12px;  ">身份证：</span>
        <span style="padding: 3px;">440923111903011200</span>
      </div>
      <div class="layui-col-xs8" style=" margin: 0; padding: 3px  3em;">
        <span style="padding: 3px; ">现住地址：</span>
        <span style="padding: 3px; ">广东省-东莞市-松山湖管委会-东莞理工学院</span>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">主诉：</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">既往病史及其他病史：</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">过敏史</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">望闻切诊</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">辅助检查</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">诊断</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">治疗意见</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">病情变化及处置</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>
    <div class="layui-form-item layui-form-text " style="padding-top: 12px;">
      <label class="layui-form-label">医嘱</label>
      <div class="layui-input-block">
        <textarea placeholder="请输入内容" class="layui-textarea"></textarea>
      </div>
    </div>

    <blockquote class="layui-elem-quote" style="margin-top: 10px;">
      处方
    </blockquote>
    <div style="text-align:center; padding-bottom: 12px;padding-top: 16;">
      <span style=" background-color:#5FB878;
        color: #fff; height: 35px; padding: 5px; list-style: 25;
         text-align:center; font-size: 14px;">处方单</span>
    </div>


    <div id="yp">
      <div id="" style="background-color: #FAFAFA;">
        <div class="layui-row" style="padding: 0 2em; line-height: 25px;">
          <div class="layui-col-xs3" style="margin: 0; padding: 3px  1em;">
            <span style="padding: 3px;">药品：</span>
            <span style="padding: 3px; ">拉米夫定</span>
          </div>
          <div class="layui-col-xs3" style="margin: 0; padding: 3px  1em;">
            <span style="padding: 3px; ">药品规格：</span>
            <span style="padding: 3px; ">0.1g*7s*2板</span>
          </div>
          <div class="layui-col-xs6" style="margin: 0; padding: 3px  1em;">
            <span style="padding: 3px; ">用法:</span>
            <input type="text" style="width: 363px;">
          </div>
        </div>
      </div>
  
      <div id="addyp" style="background-color: #FAFAFA;">
          <div class="layui-row" style="padding: 0 2em; line-height: 25px;">
            <div class="layui-col-xs3" style="margin: 0; padding: 3px  1em;">
              <span style="padding: 3px;">药品：</span>
              <span style="padding: 3px; ">拉米夫定</span>
            </div>
            <div class="layui-col-xs3" style="margin: 0; padding: 3px  1em;">
              <span style="padding: 3px; ">药品规格：</span>
              <span style="padding: 3px; ">0.1g*7s*2板</span>
            </div>
            <div class="layui-col-xs6" style="margin: 0; padding: 3px  1em;">
              <span style="padding: 3px; ">用法:</span>
              <input type="text" style="width: 363px;">
            </div>
          </div>
      </div>
    </div>
    

        <hr>
        <div style="text-align: center;">
          <a class="layui-btn layui-btn-normal layui-btn-xs">保存处方单</a>
        </div>
        <hr>

        <div>
          <input type="text" name="" id="" placeholder="搜索药品" style="height: 18px;">
          <a class="layui-btn layui-btn-normal layui-btn-xs" style="margin-bottom: 3px;">搜索</a>
        </div>

        <!-- // 表格处理 -->

        <table class="layui-hide" id="test" lay-filter="test"></table>

  
        <script type="text/html" id="barDemo">
          <a class="layui-btn layui-btn-normal layui-btn-xs" id="add_yp" lay-event="del">添加药品</a>
        </script>

        <hr>
        <hr>

      </div>
      <!-- 主体 -->

        <script>
          var i=0;
          layui.use('table', function () {
            var table = layui.table;

            table.render({
              elem: '#test'

                ,
              title: '用户数据表',
              cols: [
                [ //表头
                  {
                    field: 'yp_id',
                    title: '药品代码',
                    width: 110,
                    sort: true,
                    fixed: 'left'
                  }, {
                    field: 'yp_name',
                    title: '药品名称',
                    width: 120
                  }, {
                    field: 'yp_standard',
                    title: '规格',
                    width: 120
                  }, {
                    field: 'yp_form',
                    title: '剂型',
                    width: 80,
                    sort: true,
                    totalRow: true
                  }, {
                    field: 'yp_company',
                    title: '生产厂家',
                    width: 200,
                    sort: true
                  }, {
                    field: 'yp_price',
                    title: '价格',
                    width: 100,
                    sort: true,
                  }, {
                    fixed: 'right',
                    width: 80,
                    align: 'center',
                    toolbar: '#barDemo'
                  }
                ]
              ],
              data: [{
                "yp_id": "H20113025",
                "yp_name": "拉米夫定",
                "yp_standard": "0.1g*7s*2板",
                "yp_form": "片剂",
                "yp_company": "福建广生堂药业股份有限公司",
                "yp_price": "￥22.00"
              }, {
                "yp_id": "H44025287",
                "yp_name": "布洛芬缓释片",
                "yp_standard": "0.3g*20片",
                "yp_form": "片剂",
                "yp_company": "惠州大亚制药股份有限公司",
                "yp_price": "￥12.00"
              }],
              page: true
            });



            //监听行工具事件
            table.on('tool(test)', function (obj) {
              var data = obj.data;
              i++;
              var idname = "addyp"+i;
              var newdata = $("#addyp").clone();
              $(newdata).attr('id',idname);
              // console.log(obj.data.yp_company);

              if (obj.event === 'del') {
                var a = $("#yp span").length;
                console.log(a);
                // console.log("xiugai"+$("$('boay').find(idname) span"));
                $("#yp").append(newdata);
                $("#yp span").eq(a+1).text(obj.data.yp_name);
                $("#yp span").eq(a+3).text(obj.data.yp_standard);
              } else if (obj.event === 'edit') {
                layer.prompt({
                  formType: 2,
                  value: data.email
                }, function (value, index) {
                  obj.update({
                    email: value
                  });
                  layer.close(index);
                });
              }
            });
          });
        </script>

        <!--表格处理 -->




        <script>
          // var d;
          // // 3.父传子值
          // function childIframe(childNo) {
          //   console.log(childNo);

          //   var params = JSON.stringify(childNo);
          //   console.log(params);

          // }

          // 2.子传父值
          // $('a').click(function(){
          //     var type=$(this).attr('data-type');
          //     parent.gotoHref(type)
          // })

          // 1.示例：
          // parent.tools.func1();
        </script>

</body>

</html>
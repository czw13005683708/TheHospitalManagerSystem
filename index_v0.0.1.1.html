<!DOCTYPE html>
<html lang="ch">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>欢迎注册</title>
	<link rel="stylesheet" href="http://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="http://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <style>
        body{
            background-color: #C7EDCC;
            font-family: "microsoft yahei";
        }
        img{
            width: 100%;
        }
        .navbar{
        }
        #myppt{
            margin-top: -20px;

        }
    </style>
</head>
<body>
	<div class="container pull-right">
		<a data-toggle="modal" data-target="#registerOrLogin" href="">注册/登录</a>
	</div>
	<div id="registerOrLogin" class="modal fade" tabindex="-1">
		<div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body">
                    <button class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="form-group" action="">
                            <div class="form-group">
                                <label for="">手机号</label>
                                <input class="form-control" type="text" placeholder="请输入手机号码">
                            </div>
                            <div class="form-group">
                                <label for="">验证码</label>
                                <input class="form-control" type="password" placeholder="请输入图形验证码">
                                <span><canvas id="canvas" width="120" height="45"></canvas>
                                	<a href="#" id="changeImg">换一张</a></span>
                            </div>
                    </form>
                </div>
            </div>
        </div>
	</div>
</body>
<script>
	/**生成一个随机数**/
	function randomNum(min,max){
		return Math.floor( Math.random()*(max-min)+min);
	}
	/**生成一个随机色**/
	function randomColor(min,max){
		var r = randomNum(min,max);
		var g = randomNum(min,max);
		var b = randomNum(min,max);
		return "rgb("+r+","+g+","+b+")";
	}
	drawPic();
	document.getElementById("changeImg").onclick = function(e){
		e.preventDefault();
		drawPic();
	}
	
	/**绘制验证码图片**/
	function drawPic(){
		var canvas=document.getElementById("canvas");
		var width=canvas.width;
		var height=canvas.height;
		var ctx = canvas.getContext('2d');
		ctx.textBaseline = 'bottom';
	
		/**绘制背景色**/
		ctx.fillStyle = randomColor(180,240); //颜色若太深可能导致看不清
		ctx.fillRect(0,0,width,height);
		/**绘制文字**/
		var str = 'ABCEFGHJKLMNPQRSTWXY123456789';
		for(var i=0; i<4; i++){
			var txt = str[randomNum(0,str.length)];
			ctx.fillStyle = randomColor(50,160);  //随机生成字体颜色
			ctx.font = randomNum(15,40)+'px SimHei'; //随机生成字体大小
			var x = 10+i*25;
			var y = randomNum(25,45);
			var deg = randomNum(-45, 45);
			//修改坐标原点和旋转角度
			ctx.translate(x,y);
			ctx.rotate(deg*Math.PI/180);
			ctx.fillText(txt, 0,0);
			//恢复坐标原点和旋转角度
			ctx.rotate(-deg*Math.PI/180);
			ctx.translate(-x,-y);
			
		/**绘制干扰线**/
		for(var i=0; i<8; i++){
			ctx.strokeStyle = randomColor(40,180);
			ctx.beginPath();
			ctx.moveTo( randomNum(0,width), randomNum(0,height) );
			ctx.lineTo( randomNum(0,width), randomNum(0,height) );
			ctx.stroke();
		}
		/**绘制干扰点**/
		for(var i=0; i<100; i++){
			ctx.fillStyle = randomColor(0,255);
			ctx.beginPath();
			ctx.arc(randomNum(0,width),randomNum(0,height), 1, 0, 2*Math.PI);
			ctx.fill();
		}
	}
</script>
</html>